default:
  label: Label
  cores: 63
  log:
    file: /data1/timefed/local/process/mms/process.log

pipeline-default:
  preprocess:
    run: False
    key: preprocess-default
  extract:
    run: False
    key: extract-default
  select:
    run: True
    key: select-default
  classify:
    run: True
    key: classify-default

process-default:
  input:
    tracks: /data1/timefed/local/process/mms/v4.MMS.tracks.h5
    drs: /data1/timefed/local/process/mms/mms.drs.h5
  output:
    tracks: /data1/timefed/local/process/mms/tracks.h5
    windows: /data1/timefed/local/process/mms/windows.h5
  only:
    spacecrafts: [MMS1, MMS2, MMS3, MMS4]
    drs: [RFI]
  features:
    diff: [AGC_VOLTAGE, CARRIER_SYSTEM_NOISE_TEMP]
  concat: False
  log:
    level: info
  cores: 32
  kind: classification
  window: 3 min
  step: 5 sec
  observations: 36
  tsfresh: [diff_AGC_VOLTAGE, diff_CARRIER_SYSTEM_NOISE_TEMP]

select-rfi:
  drop: [
    CARRIER_SYSTEM_NOISE_TEMP,
    RELATIVE_HUMID,
    ELEVATION_ANGLE,
    START_TIME_DT,
    TLM_GOOD_FRAME_COUNT,
    CAR_TRK_LOOP_LOCK_STATUS,
    TOTAL_PRECIP,
    END_TIME_DT,
    GROUND_ANTENNA_ID,
    DCC_CHANNEL,
    END_OF_TRACK_TIME_DT,
    BARO_PRESSURE,
    AIR_TEMP,
    WIND_SPEED,
    SCHEDULE_ITEM_ID,
    PRECIP_RATE,
    BEGINNING_OF_TRACK_TIME_DT,
    DEW_POINT_TEMP,
    TLM_BAD_FRAME_COUNT
  ]
  split:
    train: '< "2022-04-27 17:02:07"'
    test: '>= "2022-04-27 17:02:07"'
  input:
    file: /data1/timefed/local/process/mms/select.h5
    key: rfi
  output:
    file: /data1/timefed/local/process/mms/rfi.h5
    key: selected

classify-rfi:
  input:
    file: /data1/timefed/local/process/mms/rfi.h5
    key: selected
  RandomForestClassifier:
    random_state: 0
