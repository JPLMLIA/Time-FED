# Preprocess raw data
preprocess:
  input:
    file: /data1/mloc/local/data/v3/data.h5
    key: merged
  subselect:
    gte: 2018/05/03
    lt: 2020/12/30
  train:
    lte: 2019/12/31
  test:
    gt: 2019/12/31
  exclude: [r0_10T, r0, r0_day, r0_night, r0_day_10T, r0_night_10T, o(I)_I, Cn2, Cn2_10T]
  features:
    calc: [day, minute]
    log: []
  shift:
    points: 12 # 12=1hour, 24=2, 36=3
    features: []
  output:
    file: /data1/mloc/local/runs/3hr_forecast.5min_increment/weather_data.h5
    key: preprocess

# Extract tsfresh features from windows
extract_features:
  window: 50 min
  step: 1
  observations: 10
  cores: 56
  label: [pressure, temperature, wind_speed, relative_humidity]
  static: [solar_zenith_angle, day, minute]
  historical: [5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100, 105, 110, 115, 120, 125, 130, 135, 140, 145, 150, 155, 160, 165, 170, 175, 180] # in minutes
  train:
    lte: 2019/12/31
  test:
    gt: 2019/12/31
  input:
    file: /data1/mloc/local/runs/3hr_forecast.5min_increment/weather_data.h5
    key: preprocess/full
  output:
    file: /data1/mloc/local/runs/3hr_forecast.5min_increment/weather_data.h5
    key: features
  prompt:
    features: False
  features:
    whitelist:
    blacklist:
  drop: [solar_zenith_angle, day, minute]
  process: tsfresh

# Train and test a model
classify-temperature:
  input:
    file: /data1/mloc/local/runs/3hr_forecast.5min_increment/weather_data.h5
    key: features/temperature/
    historical: [5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100, 105, 110, 115, 120, 125, 130, 135, 140, 145, 150, 155, 160, 165, 170, 175, 180]
  output:
    file: /data1/mloc/local/runs/3hr_forecast.5min_increment/weather_data.h5
    key: scores/temperature
  label: temperature
  dropna: True
  plots:
    enabled: False
  features:
    select:
    exclude:
#
classify-pressure:
  input:
    file: /data1/mloc/local/runs/3hr_forecast.5min_increment/weather_data.h5
    key: features/pressure/
    historical: [5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100, 105, 110, 115, 120, 125, 130, 135, 140, 145, 150, 155, 160, 165, 170, 175, 180]
  output:
    file: /data1/mloc/local/runs/3hr_forecast.5min_increment/weather_data.h5
    key: scores/pressure
  label: pressure
  dropna: True
  plots:
    enabled: False
  features:
    select:
    exclude:
#
classify-relative_humidity:
  input:
    file: /data1/mloc/local/runs/3hr_forecast.5min_increment/weather_data.h5
    key: features/relative_humidity/
    historical: [5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100, 105, 110, 115, 120, 125, 130, 135, 140, 145, 150, 155, 160, 165, 170, 175, 180]
  output:
    file: /data1/mloc/local/runs/3hr_forecast.5min_increment/weather_data.h5
    key: scores/relative_humidity
  label: relative_humidity
  dropna: True
  plots:
    enabled: False
  features:
    select:
    exclude:
#
classify-wind_speed:
  input:
    file: /data1/mloc/local/runs/3hr_forecast.5min_increment/weather_data.h5
    key: features/wind_speed/
    historical: [5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100, 105, 110, 115, 120, 125, 130, 135, 140, 145, 150, 155, 160, 165, 170, 175, 180]
  output:
    file: /data1/mloc/local/runs/3hr_forecast.5min_increment/weather_data.h5
    key: scores/wind_speed
  label: wind_speed
  dropna: True
  plots:
    enabled: False
  features:
    select:
    exclude:
#
